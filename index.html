<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RV (Doppler) Exoplanet Simulator — Web v2</title>

  <!-- PyScript -->
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.5.1/core.css">
  <script type="module" src="https://pyscript.net/releases/2024.5.1/core.js"></script>

  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <header>
    <h1>RV (Doppler) Exoplanet Simulator — Web v2</h1>
    <p>라디얼 속도 곡선, 흡수선 도플러 이동, 별-행성 궤도 애니메이션 포함.</p>
  </header>

  <main class="grid">
    <section class="controls">
      <h2>파라미터</h2>
      <div class="ctrl"><label>별 질량 Ms [M☉] <input id="Ms" type="range" min="0.1" max="3.0" step="0.01" value="1.0"><span id="Ms_val">1.00</span></label></div>
      <div class="ctrl"><label>행성 질량 Mp [M<sub>J</sub>] <input id="Mp" type="range" min="0.01" max="10.0" step="0.01" value="1.0"><span id="Mp_val">1.00</span></label></div>
      <div class="ctrl"><label>기울기 i [deg] <input id="inc" type="range" min="0" max="90" step="1" value="60"><span id="inc_val">60</span></label></div>
      <div class="ctrl"><label>이심률 e <input id="ecc" type="range" min="0" max="0.9" step="0.01" value="0.0"><span id="ecc_val">0.00</span></label></div>
      <div class="ctrl"><label>ω [deg] <input id="omega" type="range" min="0" max="359" step="1" value="0"><span id="omega_val">0</span></label></div>
      <div class="ctrl"><label>공전 주기 P [days] <input id="period" type="range" min="0.5" max="200.0" step="0.5" value="10"><span id="period_val">10.0</span></label></div>
      <div class="ctrl"><label>기준 파장 λ₀ [nm] <input id="lambda0" type="range" min="500" max="700" step="1" value="656"><span id="lambda0_val">656</span></label></div>
      <div class="ctrl"><label>베이스 RV γ [m/s] <input id="gamma" type="range" min="-200" max="200" step="1" value="0"><span id="gamma_val">0</span></label></div>
      <div class="ctrl row">
        <button id="btn_apply">적용</button>
        <button id="btn_play">▶ 재생</button>
        <button id="btn_pause">⏸ 정지</button>
      </div>
      <div class="ctrl">
        <label>재생 속도 (x) <input id="speed" type="range" min="0.1" max="10" step="0.1" value="1"><span id="speed_val">1.0</span></label>
      </div>
    </section>

    <section class="plots">
      <div id="rv_plot"></div>
      <div id="spectrum_plot"></div>
      <div id="orbit_plot"></div>
    </section>
  </main>

  <footer>
    <p>ⓒ 2025 RV Simulator (PyScript). v2: 애니메이션 + 스펙트럼 추가.</p>
  </footer>

  <py-config>
    packages = ["numpy==1.26.4", "matplotlib==3.8.4"]
  </py-config>

  <py-script src="rv_model.py"></py-script>
  <py-script src="main.py"></py-script>
</body>
</html>
